# リアルタイムゲームアプリケーション

このアプリケーションは、Firebaseを使用してマスターとプレイヤーが連動するリアルタイムゲームです。

## セットアップ手順

1. Firebaseプロジェクトの設定
   - Firebase Realtime Databaseを有効にする必要があります
   - データベースルールを設定してください:
   ```
   {
     "rules": {
       ".read": true,
       ".write": true
     }
   }
   ```

2. ローカルサーバーの起動
   - Nodeがインストールされていることを確認してください
   - 以下のコマンドでローカルサーバーを起動します:
   ```
   node server.js
   ```
   - ブラウザで `http://localhost:8080` にアクセスします

3. アプリケーションの使い方
   - ブラウザで `http://localhost:8080` にアクセスします（必ずローカルサーバー経由でアクセスしてください）
   - 一つの端末で「マスター」を選択します
   - 別の端末で「プレイヤー」を選択します
   - マスター画面で「ゲームスタート」ボタンを押すと、プレイヤー画面に画像が表示されます
   - マスター画面で「リセット」ボタンを押すと、プレイヤー画面の画像が非表示になります

## 注意事項

- Firebaseの設定は`app.js`に含まれています
- 表示される画像は`puzzle.png`です。異なる画像を使用する場合は、`app.js`の`imagePath`を変更してください
- インターネット接続が必要です
- 必ずローカルサーバー経由でアクセスしてください（ファイルシステム経由だとCORSエラーが発生します）

## トラブルシューティング

### Firebase接続の問題

Firebaseへの接続に問題がある場合は、以下の手順を試してください：

1. Firebaseコンソールで正しいプロジェクトが選択されていることを確認します
2. Realtime Databaseが有効になっていることを確認します
   - Firebaseコンソール -> Realtime Database -> データタブ
   - データベースが作成されていない場合は「データベースを作成」をクリックします
   - 「テストモード」で開始します
3. データベースのURLが正しいことを確認します：
   - Firebaseコンソール -> Realtime Database -> データタブ
   - データベースのURLをコピーして、`app.js`の`databaseURL`に設定します
4. 最新のFirebase SDKを使用していることを確認します
5. コンソールログでエラーメッセージを確認します

### ローカルサーバーの使用方法

CORSエラーを回避するために、必ずローカルサーバー経由でアプリケーションにアクセスしてください：

1. Node.jsがインストールされていない場合は、[Node.js公式サイト](https://nodejs.org/)からダウンロードしてインストールします
2. コマンドプロンプトやターミナルでプロジェクトフォルダに移動します
3. `node server.js` コマンドを実行します
4. ブラウザで `http://localhost:8080` にアクセスします

### オフラインモード

- インターネット接続がない場合や、Firebase接続に問題がある場合でも、アプリケーションはローカルモードで動作します
- マスターとプレイヤーが同じデバイスで動作している場合は、ローカルストレージを使用して通信します

## カスタマイズ

- 複数の画像を表示したい場合は、`app.js`の`startGameBtn.addEventListener`内のコードを変更してください
- UIのデザインは`styles.css`で変更できます 